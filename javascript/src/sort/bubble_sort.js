/**
 * バブルソートを用いて配列を昇順にソートします。
 * （配列自体を変更します - 破壊的メソッド）
 * 
 * バブルソートは最も基本的なソートアルゴリズムの一つです。
 * 隣接する要素を比較し、順序が逆であれば交換することを繰り返します。
 * 大きな要素が泡（バブル）のように配列の末尾に浮かび上がっていく様子から
 * この名前がつけられました。
 * 
 * アルゴリズムの手順:
 * 1. 配列の先頭から、隣接する2つの要素を比較
 * 2. 左の要素が右の要素より大きければ交換
 * 3. 配列の末尾まで繰り返す（1パス完了）
 * 4. 最大の要素が末尾に移動している
 * 5. 残りの要素に対して1-4を繰り返す
 * 
 * 時間計算量: O(n²) - 常に全ての比較を行う
 * 空間計算量: O(1) - 追加のメモリをほとんど使用しない
 * 安定性: 安定（同じ値の要素の相対的な順序が保持される）
 * 
 * @param {Array} array ソート対象の配列
 * @returns {Array} ソートされた配列（元の配列と同じ参照）
 */
function bubbleSort(array) {
    // 配列の要素数を取得
    const n = array.length;

    // 外側のループ: n回繰り返す
    // 各イテレーションで、未ソート部分の最大値が正しい位置に移動する
    for (let i = 0; i < n; i++) {
        // 内側のループ: 隣接する要素を比較・交換
        // n - i - 1 までの理由: 
        // - 各パスで最大値が末尾に移動するため、末尾のi個はソート済み
        // - j+1 にアクセスするため、範囲を1つ減らす
        for (let j = 0; j < n - i - 1; j++) {
            // 隣接する要素を比較
            if (array[j] > array[j + 1]) {
                // 左の要素が右より大きければ交換
                // 分割代入を使った要素の交換（ES6の機能）
                [array[j], array[j + 1]] = [array[j + 1], array[j]];
            }
        }
    }

    // ソート済みの配列を返す（元の配列への参照）
    return array;
}

module.exports = { bubbleSort };
