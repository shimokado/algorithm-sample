/**
 * 選択ソートを用いて配列を昇順にソートします。
 * （配列自体を変更します - 破壊的メソッド）
 * 
 * 選択ソートは、未ソート部分から最小値を「選択」し、
 * ソート済み部分の末尾に移動させることを繰り返すアルゴリズムです。
 * 
 * アルゴリズムの手順:
 * 1. 未ソート部分（最初は配列全体）から最小値を見つける
 * 2. 最小値を未ソート部分の先頭と交換
 * 3. ソート済み部分が1つ増える
 * 4. 配列全体がソート済みになるまで1-3を繰り返す
 * 
 * 時間計算量: O(n²) - 常に全ての比較を行う
 * 空間計算量: O(1) - 追加のメモリをほとんど使用しない
 * 安定性: 不安定（同じ値の要素の相対的な順序が保持されない場合がある）
 * 
 * @param {Array} array ソート対象の配列
 * @returns {Array} ソートされた配列（元の配列と同じ参照）
 */
function selectionSort(array) {
    // 配列の要素数を取得
    const n = array.length;

    // 外側のループ: 各位置に対して最小値を選択して配置
    // i はソート済み部分の末尾のインデックス
    for (let i = 0; i < n; i++) {
        // 未ソート部分の最小値のインデックスを追跡
        // 初期値は未ソート部分の先頭（i番目）
        let minIndex = i;

        // 内側のループ: 未ソート部分から最小値を探す
        // i+1 から末尾まで走査
        for (let j = i + 1; j < n; j++) {
            // より小さい要素が見つかった場合、minIndexを更新
            if (array[j] < array[minIndex]) {
                minIndex = j;
            }
        }

        // 最小値が現在の位置と異なる場合のみ交換
        // これにより不必要な交換を避ける
        if (minIndex !== i) {
            // 分割代入を使った要素の交換
            [array[i], array[minIndex]] = [array[minIndex], array[i]];
        }
    }

    // ソート済みの配列を返す
    return array;
}

module.exports = { selectionSort };
