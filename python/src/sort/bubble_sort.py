"""
バブルソートモジュール

このモジュールは、隣接する要素を比較・交換することで配列をソートする
最も基本的なソートアルゴリズムであるバブルソートを実装しています。
"""

from typing import List, Any


def bubble_sort(data: List[Any]) -> List[Any]:
    """
    バブルソートを用いてリストを昇順にソートします。
    （リスト自体を変更します - 破壊的メソッド）
    
    バブルソートは最も基本的なソートアルゴリズムの一つです。
    隣接する要素を比較し、順序が逆であれば交換することを繰り返します。
    大きな要素が泡（バブル）のようにリストの末尾に浮かび上がっていく様子から
    この名前がつけられました。
    
    アルゴリズムの手順:
    1. リストの先頭から、隣接する2つの要素を比較
    2. 左の要素が右の要素より大きければ交換
    3. リストの末尾まで繰り返す（1パス完了）
    4. 最大の要素が末尾に移動している
    5. 残りの要素に対して1-4を繰り返す
    
    時間計算量: O(n²) - 常に全ての比較を行う
    空間計算量: O(1) - 追加のメモリをほとんど使用しない
    安定性: 安定（同じ値の要素の相対的な順序が保持される）
    
    Args:
        data (List[Any]): ソート対象のリスト
        
    Returns:
        List[Any]: ソートされたリスト（元のリストと同じ参照）
    """
    # リストの要素数を取得
    n = len(data)
    
    # 外側のループ: n回繰り返す
    # 各イテレーションで、未ソート部分の最大値が正しい位置に移動する
    for i in range(n):
        # 内側のループ: 隣接する要素を比較・交換
        # n - i - 1 までの理由: 
        # - 各パスで最大値が末尾に移動するため、末尾のi個はソート済み
        # - j+1 にアクセスするため、範囲を1つ減らす
        for j in range(0, n - i - 1):
            # 隣接する要素を比較
            if data[j] > data[j + 1]:
                # 左の要素が右より大きければ交換
                # Pythonのタプル代入を使った要素の交換
                data[j], data[j + 1] = data[j + 1], data[j]
    
    # ソート済みのリストを返す（元のリストへの参照）
    return data
